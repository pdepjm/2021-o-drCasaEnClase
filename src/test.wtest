import personas.*
import enfermedades.*

describe "tests dr casa"{
	const frank = new Persona(cantCelulas=3500000)
	const malariaPulenta = new EnfermedadInfecciosa(cantCelulasAmenazadas = 80000)
	
	test "Al contraer una enfermedad, la persona tiene la enfermedad" {
		frank.contraer(malariaPulenta)
		assert.that(frank.tenes(malariaPulenta))
	}
	
	test "Al contraer más de 7 enfermedades debe tirar error" {
		// hacemos que frank contraiga 7 enfermedades distintas
		7.times({i => frank.contraer(new EnfermedadInfecciosa())})
		assert.throwsExceptionWithMessage("No se pueden contraer más enfermedades", {frank.contraer(malariaPulenta)})
		assert.notThat(frank.tenes(malariaPulenta))	
	}
	
	test "Al reproducirse, una enf infecciosa duplica su cant de células" {
		malariaPulenta.reproducirse()
		assert.equals(160000, malariaPulenta.cantCelulasAmenazadas())
	}
}